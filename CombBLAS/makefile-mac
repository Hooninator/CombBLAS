INCDIR = /opt/local/include
INCADD = -I$(INCDIR) -I$(INCDIR)/mpich2

# notes for configure:
# -fno-exceptions does not work with MPICH2
# -fno-rtti does not work with tr1:tuples

OPT = -DNDEBUG -O3 -DMPICH_IGNORE_CXX_SEEK 
DEB = -g -O0 -fno-inline -DMPICH_IGNORE_CXX_SEEK
COMPILER = g++ #mpic++	

CommGrid.o:	CommGrid.cpp CommGrid.h
	mpicxx $(INCADD) $(OPT) -c -o CommGrid.o CommGrid.cpp

MemoryPool.o:	MemoryPool.cpp SpDefs.h
	$(COMPILER) $(OPT) -c -o MemoryPool.o MemoryPool.cpp

Driver.o: Driver.cpp SpDCCols.cpp dcsc.cpp SpHelper.h 
	$(COMPILER) $(OPT) -c -o Driver.o Driver.cpp

driver: Driver.o MemoryPool.o CommGrid.o
	$(COMPILER) $(OPT) -o driver Driver.o MemoryPool.o CommGrid.o

clean:
	rm -f driver
	rm -f Driver.o
	rm -f MemoryPool.o 

cleanout:
	rm out.*
	rm err.*
